<!-- layouts/_default/_markup/render-image.html -->
{{- $img := .Page.Resources.GetMatch .Destination -}}
{{- if and (not $img) .Page.File -}}
{{ $path := path.Join .Page.File.Dir .Destination }}
{{- $img = resources.Get $path -}}
{{- end -}}
{{- with $img -}}

<img
  alt="{{ $.Text }}"
  src="{{ $.Destination | safeURL }}"
  width={{ $img.Width }}
  height={{ $img.Height }}
  loading="lazy"
/>

{{- end -}}